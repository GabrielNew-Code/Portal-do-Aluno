(function($,window,document,undefined){"use strict";var defaults={tagName:'a',newLine:'\n',target:'_blank',linkClass:null,linkClasses:[],linkAttributes:null};function Linkified(element,options){this._defaults=defaults;this.element=element;this.setOptions(options);this.init()}
Linkified.prototype={constructor:Linkified,init:function(){if(this.element.nodeType===1){Linkified.linkifyNode.call(this,this.element)}else{this.element=Linkified.linkify.apply(this,this.element.toString())}},setOptions:function(options){this.settings=Linkified.extendSettings(options,this.settings)},toString:function(){return this.element.toString()}};Linkified.extendSettings=function(options,settings){var prop;settings=settings||{};for(prop in defaults){if(!settings[prop]){settings[prop]=defaults[prop]}}
for(prop in options){settings[prop]=options[prop]}
return settings};Linkified.linkMatch=new RegExp(['(','\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^',')(?:','(','[a-zA-Z0-9\\+_\\-]+','(?:','\\.[a-zA-Z0-9\\+_\\-]+',')*@',')?(','http:\\/\\/|https:\\/\\/|ftp:\\/\\/',')?(','(?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+)',')(','(?:com|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2})',')(','(?:','[\\/|\\?]','(?:','[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/]*',')*',')','[\\-\\/a-zA-Z0-9_%#*&+=~]','|','\\/?',')?',')(','[^a-zA-Z0-9\\+_\\/"\\<\\-]|$',')'].join(''),'g');Linkified.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g;Linkified.linkify=function(text,options){var attr,settings,linkClasses,linkReplace=[];if(this.constructor===Linkified&&this.settings){settings=this.settings;if(options){settings=Linkified.extendSettings(options,settings)}}else{settings=Linkified.extendSettings(options)}
if(settings.linkClass){linkClasses=settings.linkClass.split(/\s+/)}else{linkClasses=[]}
linkClasses.push.apply(linkClasses,settings.linkClasses);text=text.replace(/</g,'&lt;').replace(/(\s)/g,'$1$1');linkReplace.push('$1<'+settings.tagName,'href="http://$2$4$5$6"');linkReplace.push('class="linkified'+(linkClasses.length>0?' '+linkClasses.join(' '):'')+'"');if(settings.target){linkReplace.push('target="'+settings.target+'"')}
for(attr in settings.linkAttributes){linkReplace.push([attr,'="',settings.linkAttributes[attr].replace(/\"/g,'&quot;').replace(/\$/g,'&#36;'),'"'].join(''))}
linkReplace.push('>$2$3$4$5$6</'+settings.tagName+'>$7');text=text.replace(Linkified.linkMatch,linkReplace.join(' '));text=text.replace(Linkified.emailLinkMatch,'$1mailto:$3');text=text.replace(/(\s){2}/g,'$1');text=text.replace(/\n/g,settings.newLine);return text};Linkified.linkifyNode=function(node){var children,childNode,childCount,dummyElement,i;if(node&&typeof node==='object'&&node.nodeType===1&&node.tagName.toLowerCase()!=='a'&&!/[^\s]linkified[\s$]/.test(node.className)){children=[];dummyElement=Linkified._dummyElement||document.createElement('div');childNode=node.firstChild;childCount=node.childElementCount;while(childNode){if(childNode.nodeType===3){while(dummyElement.firstChild){dummyElement.removeChild(dummyElement.firstChild)}
dummyElement.innerHTML=Linkified.linkify.call(this,childNode.textContent||childNode.innerText);children.push.apply(children,dummyElement.childNodes);while(dummyElement.firstChild){dummyElement.removeChild(dummyElement.firstChild)}}else if(childNode.nodeType===1){children.push(Linkified.linkifyNode(childNode))}else{children.push(childNode)}
childNode=childNode.nextSibling}
while(node.firstChild){node.removeChild(node.firstChild)}
for(i=0;i<children.length;i++){node.appendChild(children[i])}}
return node},Linkified._dummyElement=document.createElement('div');$.fn.linkify=function(options){return this.each(function(){var linkified;if(linkified=$.data(this,'plugin-linkify')){linkified.setOptions(options);linkified.init()}else{$.data(this,'plugin-linkify',new Linkified(this,options))}})};$.fn.linkify.Constructor=Linkified;$(window).on('load',function(){$('[data-linkify]').each(function(){var $this=$(this),$target,target=$this.attr('data-linkify'),options={tagName:$this.attr('data-linkify-tagname')||undefined,newLine:$this.attr('data-linkify-newline')||undefined,target:$this.attr('data-linkify-target')||undefined,linkClass:$this.attr('data-linkify-linkclass')||undefined};$target=target==='this'?$this:$this.find(target);$target.linkify(options)})});$('body').on('click','.linkified',function(){var $link=$(this),url=$link.attr('href'),isEmail=/^mailto:/i.test(url),target=$link.attr('target');if(isEmail){window.location.href=url}else{window.open(url,target)}
return!1})})(jQuery,window,document)